- type: entity
  id: SoulbreakerGrille
  parent: BaseStructure
  name: soulbreaker's grille
  description: Strong rods made of an unknown material.
  components:
  - type: MeleeSound
    soundGroups:
      Brute:
        collection: GrillexHit
  - type: Sprite
    drawdepth: Walls
    sprite: _Europa/Structures/Walls/soulbreaker_grill.rsi
    layers:
    - state: grillex
    - state: electrified
      sprite: Effects/electricity.rsi
      map: ["enum.ElectrifiedLayers.Sparks"]
      shader: unshaded
      visible: false
  - type: Icon
    sprite: _Europa/Structures/Walls/soulbreaker_grill.rsi
    state: grillex
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: StructuralMetallic
  - type: Electrified
    requirePower: true
    noWindowInTile: true
    highVoltageNode: high
    mediumVoltageNode: medium
    lowVoltageNode: low
  - type: NodeContainer
    nodes:
      high:
        !type:CableDeviceNode
        nodeGroupID: HVPower
      medium:
        !type:CableDeviceNode
        nodeGroupID: MVPower
      low:
        !type:CableDeviceNode
        nodeGroupID: Apc
  - type: Physics
    bodyType: Static
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.5,-0.5,0.5,0.5"
        layer:
        - GlassLayer
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 500
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          GrilleBroken:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: Appearance
  - type: GenericVisualizer
    visuals:
      enum.ElectrifiedVisuals.ShowSparks:
        enum.ElectrifiedLayers.Sparks:
          True: { visible: True }
          False: { visible: False }
  - type: AnimationPlayer
  - type: Penetratable # Goobstation - Better snipers
    penetrateDamage: 10

- type: entity
  id: SoulbreakerGrilleBroken
  parent: BaseStructure
  name: soulbreaker's grille
  description: Shattered bars. Freedom!
  components:
  - type: Transform
    anchored: true
  - type: Sprite
    drawdepth: Walls
    sprite: _Europa/Structures/Walls/soulbreaker_grill.rsi
    state: brokengrillex
  - type: Icon
    sprite: _Europa/Structures/Walls/soulbreaker_grill.rsi
    state: brokengrillex
  - type: Fixtures # overwrite BaseStructure parent.
  - type: Physics
    bodyType: Static
    canCollide: false
  - type: Tag
    tags:
    - ForceNoFixRotations
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: StructuralMetallic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors:
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: MeleeSound
    soundGroups:
      Brute:
        collection: GrillexHit
